<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="_04_DataBinding.Views.BasicBindingsPage"
             Title="1. Basic bindings">

    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="16">

            <Label Text="Basic bindings"
                   FontSize="22"
                   FontAttributes="Bold" />

            <Label Text="This page demonstrates three fundamentals: (1) binding with a BindingContext, (2) binding by explicitly setting Source, and (3) setting a binding in C# using a compiled lambda." />

            <Border Padding="12" Stroke="LightGray" StrokeShape="RoundRectangle 8">
                <VerticalStackLayout Spacing="10">
                    <Label Text="A) BindingContext + inheritance" FontAttributes="Bold" />

                    <!--
                        The StackLayout's BindingContext is set to the Slider.
                        All children inherit this BindingContext, so they can bind to Slider.Value.
                    -->
                    <VerticalStackLayout x:Name="bindingContextDemo"
                                         x:DataType="Slider"
                                         BindingContext="{x:Reference rotationSlider}"
                                         Spacing="8">

                        <Label Text="Drag the slider. Both the Label and BoxView bind to the same source." />

                        <Label Text="TEXT"
                               HorizontalOptions="Center"
                               FontSize="48"
                               Rotation="{Binding Value}" />

                        <BoxView HeightRequest="20"
                                WidthRequest="220"
                                Color="#512BD4"
                                HorizontalOptions="Center"
                                Rotation="{Binding Value}" />
                    </VerticalStackLayout>

                    <Slider x:Name="rotationSlider"
                            Maximum="360" />
                </VerticalStackLayout>
            </Border>

            <Border Padding="12" Stroke="LightGray" StrokeShape="RoundRectangle 8">
                <VerticalStackLayout Spacing="10">
                    <Label Text="B) Explicit Source (no BindingContext needed)" FontAttributes="Bold" />

                    <Label Text="The Label doesn't change its BindingContext. Instead, the binding is set in code-behind." />

                    <Label x:Name="scaleLabel"
                           Text="Scale me"
                           FontSize="32"
                           HorizontalOptions="Center" />

                    <Slider x:Name="scaleSlider"
                            Minimum="0.5"
                            Maximum="2" />
                </VerticalStackLayout>
            </Border>

            <Border Padding="12" Stroke="LightGray" StrokeShape="RoundRectangle 8">
                <VerticalStackLayout Spacing="10">
                    <Label Text="C) Binding in code (SetBinding + compiled expression)" FontAttributes="Bold" />

                    <Label Text="Below, we set up a binding in the code-behind using SetBinding(..., static (Slider s) => s.Value)." />

                    <Label x:Name="codeBindingLabel"
                           Text="Rotate (code binding)"
                           FontSize="32"
                           HorizontalOptions="Center" />

                    <Slider x:Name="codeBindingSlider"
                            Maximum="360" />
                </VerticalStackLayout>
            </Border>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
